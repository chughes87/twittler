<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

    <script>
      var add_tweets = function(tweets) {
        var $body = $('body');
        for(var i = 0; i < tweets.length; i++){
          var tweet = tweets[i];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': \"' + tweet.message + '\" tweeted on: ' + tweet.created_at);
          $tweet.prependTo($body);
        }
      }

      var refresh = function(previousCount) {
        var currentCount = streams.home.length;
        if( currentCount > previousCount){
          add_tweets(streams.home.slice(previousCount, currentCount));
        }
        return currentCount;
      }

      $(document).ready(function(){
        var tweetCount = 0;
        setInterval(function(){
          tweetCount = refresh(tweetCount);
        }, 300);
      });

    </script>
  </body>
</html>
